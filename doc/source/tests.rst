.. _tests:

Testing the code
================

There are two kinds of test, unitary an advanced tests. To try the unitary test do the following steps

lmrob Unitary Test
------------------
    #. Move to tests directory
        .. code-block:: bash
        
            (env) $ cd tests/unittest


    #. Try all the tests
        .. code-block:: bash

            (env) $ python -m unittest test_lmrob -v

        and you should get a the following

        .. code-block:: bash

            test_lm_fit (test_lmrob.LmrobTestCase) ... ok
            test_lmrob (test_lmrob.LmrobTestCase) ... ok
            test_lmrob_D_fit (test_lmrob.LmrobTestCase) ... ok
            test_lmrob_M_S (test_lmrob.LmrobTestCase) ... ok
            test_lmrob_M_fit (test_lmrob.LmrobTestCase) ... ok
            test_lmrob_S (test_lmrob.LmrobTestCase) ... ok
            test_lmrob_categorical (test_lmrob.LmrobTestCase) ... ok
            test_lmrob_categorical_offset (test_lmrob.LmrobTestCase) ... ok
            test_lmrob_categorical_offset_weights (test_lmrob.LmrobTestCase) ... ok
            test_lmrob_categorical_weights (test_lmrob.LmrobTestCase) ... ok
            test_lmrob_fit (test_lmrob.LmrobTestCase) ... ok
            test_lmrob_lar (test_lmrob.LmrobTestCase) ... ok
            test_lmrob_offset (test_lmrob.LmrobTestCase) ... ok
            test_lmrob_offset_weights (test_lmrob.LmrobTestCase) ... ok
            test_lmrob_tau (test_lmrob.LmrobTestCase) ... ok
            test_lmrob_weights (test_lmrob.LmrobTestCase) ... ok
            test_ghq (test_lmrob.LmrobUtilities) ... ok
            test_lmrob_hat (test_lmrob.LmrobUtilities) ... ok
            test_lmrob_kappa (test_lmrob.LmrobUtilities) ... ok
            test_lmrob_rweights (test_lmrob.LmrobUtilities) ... ok
            test_mchi (test_lmrob.LmrobUtilities) ... ok
            test_mpsi (test_lmrob.LmrobUtilities) ... ok
            test_mwgt (test_lmrob.LmrobUtilities) ... ok

lmrob Advanced Test
-------------------
    #. Move to tests directory
        .. code-block:: bash
        
            (env) $ cd tests/advancedtest/


    #. Try all the tests
        
        .. code-block:: bash

            (env) $ cd tests/advancedtest/

    #. Run the following command

        .. code-block:: bash

            (env) $ ./test_lmrob.sh

    #. Getting something like that

        .. code-block:: bash

            METHOD: S
            +----------------+---------------------+-------------+
            | R Coefficients | Python Coefficients |    Diff     |
            +----------------+---------------------+-------------+
            |   -36.92541589 |        -36.92541690 | 1.00995e-06 |
            |     0.84957481 |          0.84957481 | 1.51956e-10 |
            |     0.43047400 |          0.43047399 | 1.38134e-08 |
            |    -0.07353895 |         -0.07353894 | 1.51891e-08 |
            +----------------+---------------------+-------------+
            |  R residuals   |  Python residuals   |    Diff     |
            +----------------+---------------------+-------------+
            |     5.88160019 |          5.88160023 | 3.48700e-08 |
            |     0.80806118 |          0.80806125 | 6.27125e-08 |
            |     6.06396134 |          6.06396129 | 4.22755e-08 |
            |     8.31829084 |          8.31829086 | 1.93947e-08 |
            |    -0.82076106 |         -0.82076109 | 3.12389e-08 |
            |    -1.25123511 |         -1.25123512 | 5.92210e-09 |
            |    -0.24047511 |         -0.24047525 | 1.47660e-07 |
            |     0.75952489 |          0.75952475 | 1.47660e-07 |
            |    -0.85293589 |         -0.85293589 | 4.85767e-09 |
            |    -0.21533869 |         -0.21533863 | 6.34561e-08 |
            |     0.44651239 |          0.44651220 | 1.87127e-07 |
            |    -0.19655257 |         -0.19655275 | 1.84601e-07 |
            |    -3.06826068 |         -3.06826067 | 7.77104e-09 |
            |    -1.68980562 |         -1.68980590 | 2.73180e-07 |
            |     1.24311084 |          1.24311065 | 1.84998e-07 |
            |     0.02249381 |          0.02249371 | 1.01470e-07 |
            |    -0.43752638 |         -0.43752606 | 3.13642e-07 |
            |     0.07724669 |          0.07724681 | 1.18744e-07 |
            |     0.72031165 |          0.72031176 | 1.16218e-07 |
            |     1.76994083 |          1.76994089 | 5.89368e-08 |
            |    -9.46225536 |         -9.46225556 | 1.95371e-07 |
            +----------------+---------------------+-------------+

            METHOD: MM
            +----------------+---------------------+-------------+
            | R Coefficients | Python Coefficients |    Diff     |
            +----------------+---------------------+-------------+
            |   -41.52461665 |        -41.52461530 | 1.35669e-06 |
            |     0.93884534 |          0.93884535 | 9.05454e-09 |
            |     0.57955324 |          0.57955314 | 1.02435e-07 |
            |    -0.11292183 |         -0.11292182 | 7.40542e-10 |
            +----------------+---------------------+-------------+
            |  R residuals   |  Python residuals   |    Diff     |
            +----------------+---------------------+-------------+
            |     2.81909429 |          2.81909491 | 6.18791e-07 |
            |    -2.29382753 |         -2.29382691 | 6.19531e-07 |
            |     3.78534931 |          3.78534976 | 4.58453e-07 |
            |     7.23112652 |          7.23112700 | 4.75948e-07 |
            |    -1.60976700 |         -1.60976673 | 2.71078e-07 |
            |    -2.18932024 |         -2.18931987 | 3.73513e-07 |
            |    -1.09134253 |         -1.09134206 | 4.71505e-07 |
            |    -0.09134253 |         -0.09134206 | 4.71505e-07 |
            |    -1.43393887 |         -1.43393846 | 4.09731e-07 |
            |    -0.32662546 |         -0.32662556 | 9.72605e-08 |
            |     0.68967097 |          0.68967087 | 1.03925e-07 |
            |     0.15630238 |          0.15630218 | 2.05620e-07 |
            |    -3.10078181 |         -3.10078191 | 9.87416e-08 |
            |    -1.43819497 |         -1.43819497 | 4.45245e-09 |
            |     2.20043371 |          2.20043368 | 3.14890e-08 |
            |     0.86166823 |          0.86166820 | 2.92674e-08 |
            |    -0.29879056 |         -0.29879048 | 8.35353e-08 |
            |     0.49166222 |          0.49166230 | 7.83515e-08 |
            |     1.02503080 |          1.02503098 | 1.80046e-07 |
            |     1.61780240 |          1.61780252 | 1.24238e-07 |
            |   -10.50973597 |        -10.50973598 | 9.19078e-09 |
            +----------------+---------------------+-------------+

            METHOD: SMD
            +----------------+---------------------+-------------+
            | R Coefficients | Python Coefficients |    Diff     |
            +----------------+---------------------+-------------+
            |   -41.76557868 |        -41.76557868 | 1.20792e-13 |
            |     0.91122641 |          0.91122641 | 7.77156e-16 |
            |     0.66967312 |          0.66967312 | 2.22045e-16 |
            |    -0.11296643 |         -0.11296643 | 8.32667e-17 |
            +----------------+---------------------+-------------+
            |  R residuals   |  Python residuals   |    Diff     |
            +----------------+---------------------+-------------+
            |     2.84030349 |          2.84030349 | 3.64153e-14 |
            |    -2.27266294 |         -2.27266294 | 3.95239e-14 |
            |     3.84874822 |          3.84874822 | 3.86358e-14 |
            |     7.02546544 |          7.02546544 | 1.86517e-14 |
            |    -1.63518832 |         -1.63518832 | 1.28786e-14 |
            |    -2.30486144 |         -2.30486144 | 1.64313e-14 |
            |    -1.29673599 |         -1.29673599 | 1.64313e-14 |
            |    -0.29673599 |         -0.29673599 | 1.74305e-14 |
            |    -1.65995579 |         -1.65995579 | 6.88338e-15 |
            |    -0.10235519 |         -0.10235519 | 5.25968e-15 |
            |     0.91434267 |          0.91434267 | 6.88338e-15 |
            |     0.47104936 |          0.47104936 | 8.77076e-15 |
            |    -2.87642233 |         -2.87642233 | 9.32587e-15 |
            |    -1.30346474 |         -1.30346474 | 1.15463e-14 |
            |     2.20415398 |          2.20415398 | 8.88178e-16 |
            |     0.86525469 |          0.86525469 | 2.10942e-15 |
            |    -0.38594843 |         -0.38594843 | 3.66374e-15 |
            |     0.40481657 |          0.40481657 | 1.99840e-15 |
            |     0.84810988 |          0.84810988 | 3.33067e-16 |
            |     1.60668426 |          1.60668426 | 1.04361e-14 |
            |   -10.13378768 |        -10.13378768 | 1.77636e-15 |
            +----------------+---------------------+-------------+

            METHOD: SMDM
            +----------------+---------------------+-------------+
            | R Coefficients | Python Coefficients |    Diff     |
            +----------------+---------------------+-------------+
            |   -41.68557185 |        -41.68557188 | 3.71171e-08 |
            |     0.83626010 |          0.83626010 | 3.70974e-09 |
            |     0.93445082 |          0.93445081 | 1.16940e-08 |
            |    -0.12585903 |         -0.12585903 | 7.18257e-10 |
            +----------------+---------------------+-------------+
            |  R residuals   |  Python residuals   |    Diff     |
            +----------------+---------------------+-------------+
            |     2.75604537 |          2.75604536 | 7.84833e-09 |
            |    -2.36981366 |         -2.36981367 | 7.13008e-09 |
            |     3.93210653 |          3.93210652 | 1.34059e-08 |
            |     6.36036156 |          6.36036158 | 2.52814e-08 |
            |    -1.77073681 |         -1.77073681 | 1.89339e-09 |
            |    -2.70518763 |         -2.70518761 | 1.35874e-08 |
            |    -1.88448427 |         -1.88448425 | 2.09719e-08 |
            |    -0.88448427 |         -0.88448425 | 2.09719e-08 |
            |    -2.36014723 |         -2.36014720 | 2.84264e-08 |
            |     0.43109366 |          0.43109363 | 2.50160e-08 |
            |     1.56382492 |          1.56382489 | 3.14803e-08 |
            |     1.37241671 |          1.37241667 | 4.24561e-08 |
            |    -2.31718828 |         -2.31718831 | 2.64525e-08 |
            |    -0.86718978 |         -0.86718981 | 2.26593e-08 |
            |     2.25390572 |          2.25390571 | 1.80236e-09 |
            |     0.87632863 |          0.87632863 | 3.52415e-10 |
            |    -0.82014859 |         -0.82014857 | 2.21021e-08 |
            |     0.06086461 |          0.06086463 | 1.70742e-08 |
            |     0.25227282 |          0.25227285 | 2.80500e-08 |
            |     1.48643028 |          1.48643029 | 4.35506e-09 |
            |    -9.08847985 |         -9.08847991 | 5.40456e-08 |
            +----------------+---------------------+-------------+

nlrob Unitary Test
------------------
    #. Move to tests directory
        .. code-block:: bash
        
            (env) $ cd tests/unittest

    #. Try all the tests
        .. code-block:: bash

            (env) $ python -m unittest test_nlrob -v

        and you should get a the following

        .. code-block:: bash

            test_nlrob_cm (test_nlrob.NlrobTestCase) ... ok
            test_nlrob_mm (test_nlrob.NlrobTestCase) ... ok
            test_nlrob_mtl (test_nlrob.NlrobTestCase) ... ok
            test_nlrob_tau (test_nlrob.NlrobTestCase) ... ok
            test_nls (test_nlrob.NlrobTestCase) ... ok